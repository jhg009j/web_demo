function NewsPub(){}NewsPub.prototype.FileUpload=function(){var e=$("#thumbnail-btn");e.change((function(){var a=e[0].files[0],n=new FormData;n.append("file",a),xfzajax.post({url:"/cms/upload_file/",data:n,processData:!1,contentType:!1,success:function(e){if(200===e.code){var a=e.data.url;$("#thumbnail-form").val(a)}else xfzajax.success(e.message)}})}))},NewsPub.prototype.NewsPublication=function(){$("#pub-btn").click((function(e){e.preventDefault();var a=$("input[name='title']").val(),n=$("select[name='category']").val(),t=$("input[name='desc']").val(),c=$("input[name='thumbnail']").val(),o=$("textarea[name='content']").val(),s=$(".form-group").attr("newsId"),u=null;u=s?"/cms/news_edit/":"/cms/news_pub/",xfzajax.post({url:u,data:{title:a,category:n,desc:t,thumbnail:c,content:o,news_id:s},success:function(e){200===e.code?s?xfzalert.SuccessBox("操作成功！","文章修改成功！",(function(){window.location.reload()})):xfzalert.SuccessBox("操作成功！","文章发布成功！",(function(){window.location.reload()})):xfzajax.success(e.message)}})}))},$((function(){var e=new NewsPub;e.FileUpload(),e.NewsPublication()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld3NfcHViLmpzIl0sIm5hbWVzIjpbIk5ld3NQdWIiLCJwcm90b3R5cGUiLCJGaWxlVXBsb2FkIiwidXBsb2FkQnRuIiwiJCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1kYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsIk5ld3NQdWJsaWNhdGlvbiIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRpdGxlIiwiY2F0ZWdvcnkiLCJkZXNjIiwidGh1bWJuYWlsIiwiY29udGVudCIsIm5ld3NfaWQiLCJhdHRyIiwieGZ6YWxlcnQiLCJTdWNjZXNzQm94Iiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJuZXdzcHViIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxXQUFhLFdBQzNCLElBQ0lDLEVBQVlDLEVBQUUsa0JBQ2xCRCxFQUFVRSxRQUFPLFdBQ2IsSUFBSUMsRUFBT0gsRUFBVSxHQUFHSSxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBR25CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUwsRUFBT0ssRUFBYSxLQUFRLElBQ1hkLEVBQUUsbUJBQ1JlLElBQUlOLFFBRW5CRixRQUFRTSxRQUFRQyxFQUFnQixnQkFPcERsQixRQUFRQyxVQUFVbUIsZ0JBQWtCLFdBRW5CaEIsRUFBRSxZQUNSaUIsT0FBTSxTQUFVQyxHQUNuQkEsRUFBTUMsaUJBQ04sSUFBSUMsRUFBUXBCLEVBQUUsdUJBQXVCZSxNQUNqQ00sRUFBV3JCLEVBQUUsMkJBQTJCZSxNQUN4Q08sRUFBT3RCLEVBQUUsc0JBQXNCZSxNQUMvQlEsRUFBWXZCLEVBQUUsMkJBQTJCZSxNQUN6Q1MsRUFBVXhCLEVBQUUsNEJBQTRCZSxNQUN4Q1UsRUFBVXpCLEVBQUUsZUFBZTBCLEtBQUssVUFDaENqQixFQUFNLEtBRU5BLEVBREFnQixFQUNNLGtCQUVBLGlCQUVWbEIsUUFBUUMsS0FBSyxDQUNUQyxJQUFPQSxFQUNQQyxLQUFRLENBQ0pVLE1BQVNBLEVBQ1RDLFNBQVlBLEVBQ1pDLEtBQVFBLEVBQ1JDLFVBQWFBLEVBQ2JDLFFBQVdBLEVBQ1hDLFFBQVdBLEdBRWZaLFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxLQUNUVyxFQUNBRSxTQUFTQyxXQUFXLFFBQVMsV0FBVyxXQUNwQ0MsT0FBT0MsU0FBU0MsWUFHcEJKLFNBQVNDLFdBQVcsUUFBUyxXQUFXLFdBQ3BDQyxPQUFPQyxTQUFTQyxZQUl4QnhCLFFBQVFNLFFBQVFDLEVBQWdCLGdCQU9wRGQsR0FBRSxXQUNFLElBQUlnQyxFQUFVLElBQUlwQyxRQUNsQm9DLEVBQVFsQyxhQUNSa0MsRUFBUWhCIiwiZmlsZSI6Im5ld3NfcHViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3NQdWIoKSB7XG5cbn1cblxuTmV3c1B1Yi5wcm90b3R5cGUuRmlsZVVwbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XG4gICAgdXBsb2FkQnRuLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmaWxlID0gdXBsb2FkQnRuWzBdLmZpbGVzWzBdO1xuICAgICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgLy/mraTlpITpgJrov4dhamF4LT5Gb3JtRGF0YeWGs+WumuWPkemAgee7meWQjuerr+eahOaWh+S7tueahG5hbWXlkI3np7BcbiAgICAgICAgLy/oi6Xkvb/nlKjooajljZXvvIxuYW1l5bqU6K+l5ZyoaW5wdXTmoIfnrb7kuK3orr7nva5cbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgIHhmemFqYXgucG9zdCh7XG4gICAgICAgICAgICAndXJsJzogJy9jbXMvdXBsb2FkX2ZpbGUvJyxcbiAgICAgICAgICAgICdkYXRhJzogZm9ybWRhdGEsXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcbiAgICAgICAgICAgICdjb250ZW50VHlwZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IChyZXN1bHRbJ2RhdGEnXVsndXJsJ10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsX2Zvcm0gPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsX2Zvcm0udmFsKHVybCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWpheC5zdWNjZXNzKHJlc3VsdFsnbWVzc2FnZSddKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxufTtcblxuTmV3c1B1Yi5wcm90b3R5cGUuTmV3c1B1YmxpY2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHViQnRuID0gJCgnI3B1Yi1idG4nKTtcbiAgICBwdWJCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgY2F0ZWdvcnkgPSAkKFwic2VsZWN0W25hbWU9J2NhdGVnb3J5J11cIikudmFsKCk7XG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSAkKFwidGV4dGFyZWFbbmFtZT0nY29udGVudCddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgbmV3c19pZCA9ICQoJy5mb3JtLWdyb3VwJykuYXR0cignbmV3c0lkJyk7XG4gICAgICAgIHZhciB1cmwgPSBudWxsO1xuICAgICAgICBpZiAobmV3c19pZCkge1xuICAgICAgICAgICAgdXJsID0gJy9jbXMvbmV3c19lZGl0LydcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVybCA9ICcvY21zL25ld3NfcHViLydcbiAgICAgICAgfVxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xuICAgICAgICAgICAgJ3VybCc6IHVybCxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxuICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxuICAgICAgICAgICAgICAgICdjb250ZW50JzogY29udGVudCxcbiAgICAgICAgICAgICAgICAnbmV3c19pZCc6IG5ld3NfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3c19pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuU3VjY2Vzc0JveCgn5pON5L2c5oiQ5Yqf77yBJywgJ+aWh+eroOS/ruaUueaIkOWKn++8gScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5TdWNjZXNzQm94KCfmk43kvZzmiJDlip/vvIEnLCAn5paH56ug5Y+R5biD5oiQ5Yqf77yBJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHhmemFqYXguc3VjY2VzcyhyZXN1bHRbJ21lc3NhZ2UnXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn07XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXdzcHViID0gbmV3IE5ld3NQdWIoKTtcbiAgICBuZXdzcHViLkZpbGVVcGxvYWQoKTtcbiAgICBuZXdzcHViLk5ld3NQdWJsaWNhdGlvbigpO1xufSk7Il19
