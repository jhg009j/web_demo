function Banner(){this.index=1,this.bannerGroup=$("#navsroll"),this.toggleArrow=$(".arrow"),this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#navsrollul"),this.lilist=this.bannerUl.children("li"),this.liCount=this.lilist.length,this.pageControl=$(".page-control")}function NewsList(){this.next_page=2,this.category_id=0,this.loadBtn=$("#load-more-btn")}Banner.prototype.InitBannerUl=function(){var n=this.bannerUl.children("li").eq(0).clone(),t=this.bannerUl.children("li").eq(this.liCount-1).clone();this.bannerUl.append(n),this.bannerUl.prepend(t),this.bannerUl.css({width:796*(this.liCount+2)}),this.bannerUl.css({left:-796})},Banner.prototype.run=function(){var n=this;this.timecon=setInterval((function(){n.index<n.liCount+1?n.index+=1:n.index===n.liCount+1&&(n.bannerUl.css({left:-796}),n.index=2),n.animate(),n.FollowRunPageControl()}),2e3)},Banner.prototype.animate=function(){this.bannerUl.stop().animate({left:-796*this.index},500)},Banner.prototype.InitPageControl=function(){for(var n=0;n<this.liCount;n++){var t=$("<li></li>");this.pageControl.append(t),0===n&&t.addClass("active")}this.pageControl.css({width:12*this.liCount+16+16*(this.liCount-1)})},Banner.prototype.ClickPageControl=function(){var n=this;n.pageControl.children("li").each((function(t,e){$(e).click((function(){n.index=0===t?1:3===t?4:t+1,$(e).addClass("active").siblings().removeClass("active"),n.animate()}))}))},Banner.prototype.FollowRunPageControl=function(){var n=this.index;n===this.liCount+1?n=0:0===n?n=this.liCount-1:n-=1,this.pageControl.children("li").eq(n).addClass("active").siblings().removeClass("active")},Banner.prototype.MouseHoverListen=function(){var n=this;n.bannerGroup.hover((function(){clearInterval(n.timecon),n.toggleArrow.show()}),(function(){n.toggleArrow.hide(),n.run()}))},Banner.prototype.ArrowClick=function(){var n=this;n.leftArrow.click((function(){0===n.index?(n.bannerUl.css({left:-796*n.liCount}),n.index=n.liCount-1):n.index-=1,n.FollowRunPageControl(),n.animate()})),n.rightArrow.click((function(){n.index===n.liCount+1?(n.bannerUl.css({left:-796}),n.index=2):n.index+=1,n.animate(),n.FollowRunPageControl()}))},NewsList.prototype.LoadMore=function(){var n=this;n.loadBtn.click((function(){xfzajax.get({url:"/news/more/",data:{p:n.next_page,category_id:n.category_id},success:function(t){if(200===t.code){var e=t.data;if(e.length>0){var i=template("news-load",{newslist:e});$(".news-list-ul").append(i),n.next_page+=1}else n.loadBtn.hide()}}})}))},NewsList.prototype.DifferCategory=function(){var n=this;$(".news-guide-list").children().children().click((function(){var t=$(this);t.addClass("active").parent().siblings().children().removeClass("active"),n.category_id=t.attr("category-id"),xfzajax.get({url:"/news/differ_cate/",data:{category_id:n.category_id},success:function(t){var e=t.data,i=$(".news-list-ul");i.empty();var o=template("news-load",{newslist:e});i.append(o),n.loadBtn.show(),n.next_page=2}})}))},$((function(){var n=new Banner;n.run(),n.MouseHoverListen(),n.ArrowClick(),n.InitPageControl(),n.ClickPageControl(),n.InitBannerUl();var t=new NewsList;t.LoadMore(),t.DifferCategory()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lckdyb3VwIiwiJCIsInRvZ2dsZUFycm93IiwibGVmdEFycm93IiwicmlnaHRBcnJvdyIsImJhbm5lclVsIiwibGlsaXN0IiwiY2hpbGRyZW4iLCJsaUNvdW50IiwibGVuZ3RoIiwicGFnZUNvbnRyb2wiLCJOZXdzTGlzdCIsIm5leHRfcGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsIkluaXRCYW5uZXJVbCIsIkZpcnN0QmFubmVyIiwiZXEiLCJjbG9uZSIsIkxhc3RCYW5uZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiY3NzIiwid2lkdGgiLCJsZWZ0IiwicnVuIiwic2VsZiIsInRpbWVjb24iLCJzZXRJbnRlcnZhbCIsImFuaW1hdGUiLCJGb2xsb3dSdW5QYWdlQ29udHJvbCIsInN0b3AiLCJJbml0UGFnZUNvbnRyb2wiLCJpIiwibGlUYWciLCJhZGRDbGFzcyIsIkNsaWNrUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwiY2xpY2siLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwiTW91c2VIb3Zlckxpc3RlbiIsImhvdmVyIiwiY2xlYXJJbnRlcnZhbCIsInNob3ciLCJoaWRlIiwiQXJyb3dDbGljayIsIkxvYWRNb3JlIiwieGZ6YWpheCIsImdldCIsInVybCIsImRhdGEiLCJwIiwic3VjY2VzcyIsInJlc3VsdCIsIm5ld3NsaXN0IiwidHBsIiwidGVtcGxhdGUiLCJEaWZmZXJDYXRlZ29yeSIsImEiLCJwYXJlbnQiLCJhdHRyIiwibmV3c19saXN0X2dyb3VwIiwiZW1wdHkiLCJiYW5uZXIiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLE1BQVEsRUFDYkQsS0FBS0UsWUFBY0MsRUFBRSxhQUNyQkgsS0FBS0ksWUFBY0QsRUFBRSxVQUNyQkgsS0FBS0ssVUFBWUYsRUFBRSxlQUNuQkgsS0FBS00sV0FBYUgsRUFBRSxnQkFD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QUNoQixJQUFJUCxFQUFNQyxTQUFTLFlBQWEsQ0FBQ0YsU0FBWUEsSUFDN0NPLEVBQWdCM0MsT0FBT3FDLEdBQ3ZCL0IsRUFBS2IsUUFBUWdDLE9BQ2JuQixFQUFLZixVQUFZLFNBT2pDWCxHQUFFLFdBQ0UsSUFBSWlFLEVBQVMsSUFBSXJFLE9BQ2pCcUUsRUFBT3hDLE1BQ1B3QyxFQUFPdkIsbUJBQ1B1QixFQUFPbEIsYUFDUGtCLEVBQU9qQyxrQkFDUGlDLEVBQU83QixtQkFDUDZCLEVBQU9sRCxlQUVQLElBQUl5QyxFQUFXLElBQUk5QyxTQUNuQjhDLEVBQVNSLFdBQ1RRLEVBQVNHIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcbiAgICB0aGlzLmluZGV4ID0gMTtcbiAgICB0aGlzLmJhbm5lckdyb3VwID0gJCgnI25hdnNyb2xsJyk7XG4gICAgdGhpcy50b2dnbGVBcnJvdyA9ICQoJy5hcnJvdycpO1xuICAgIHRoaXMubGVmdEFycm93ID0gJCgnLmxlZnQtYXJyb3cnKTtcbiAgICB0aGlzLnJpZ2h0QXJyb3cgPSAkKCcucmlnaHQtYXJyb3cnKTtcbiAgICB0aGlzLmJhbm5lclVsID0gJCgnI25hdnNyb2xsdWwnKTtcbiAgICB0aGlzLmxpbGlzdCA9IHRoaXMuYmFubmVyVWwuY2hpbGRyZW4oJ2xpJyk7XG4gICAgdGhpcy5saUNvdW50ID0gdGhpcy5saWxpc3QubGVuZ3RoO1xuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKCcucGFnZS1jb250cm9sJyk7XG5cbn1cblxuQmFubmVyLnByb3RvdHlwZS5Jbml0QmFubmVyVWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBGaXJzdEJhbm5lciA9IHNlbGYuYmFubmVyVWwuY2hpbGRyZW4oJ2xpJykuZXEoMCkuY2xvbmUoKTtcbiAgICB2YXIgTGFzdEJhbm5lciA9IHNlbGYuYmFubmVyVWwuY2hpbGRyZW4oJ2xpJykuZXEoc2VsZi5saUNvdW50IC0gMSkuY2xvbmUoKTtcbiAgICBzZWxmLmJhbm5lclVsLmFwcGVuZChGaXJzdEJhbm5lcik7XG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKExhc3RCYW5uZXIpO1xuICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnd2lkdGgnOiA3OTYgKiAoc2VsZi5saUNvdW50ICsgMil9KTtcbiAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtNzk2fSk7XG59O1xuXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy50aW1lY29uID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5pbmRleCA8IChzZWxmLmxpQ291bnQgKyAxKSkge1xuICAgICAgICAgICAgc2VsZi5pbmRleCArPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuaW5kZXggPT09IHNlbGYubGlDb3VudCArIDEpIHtcbiAgICAgICAgICAgIHNlbGYuYmFubmVyVWwuY3NzKHsnbGVmdCc6IC03OTZ9KTtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSAyO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICBzZWxmLkZvbGxvd1J1blBhZ2VDb250cm9sKCk7XG5cbiAgICB9LCAyMDAwKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7J2xlZnQnOiAtNzk2ICogc2VsZi5pbmRleH0sIDUwMClcbn07XG5cbkJhbm5lci5wcm90b3R5cGUuSW5pdFBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yIChpID09PSAwOyBpIDwgc2VsZi5saUNvdW50OyBpKyspIHtcbiAgICAgICAgdmFyIGxpVGFnID0gJCgnPGxpPjwvbGk+Jyk7XG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGxpVGFnKTtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGxpVGFnLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxmLnBhZ2VDb250cm9sLmNzcyh7J3dpZHRoJzogMTIgKiBzZWxmLmxpQ291bnQgKyA4ICogMiArIDE2ICogKHNlbGYubGlDb3VudCAtIDEpfSlcbn07XG5cbkJhbm5lci5wcm90b3R5cGUuQ2xpY2tQYWdlQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5wYWdlQ29udHJvbC5jaGlsZHJlbignbGknKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgb2JqKSB7XG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLmluZGV4ID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IDMpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmluZGV4ID0gNDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi5pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQob2JqKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBzZWxmLmFuaW1hdGUoKVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5CYW5uZXIucHJvdG90eXBlLkZvbGxvd1J1blBhZ2VDb250cm9sID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgaW5kZXggPSBzZWxmLmluZGV4O1xuICAgIGlmIChpbmRleCA9PT0gc2VsZi5saUNvdW50ICsgMSkge1xuICAgICAgICBpbmRleCA9IDA7XG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICBpbmRleCA9IHNlbGYubGlDb3VudCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW5kZXggPSBpbmRleCAtIDE7XG4gICAgfVxuICAgIHNlbGYucGFnZUNvbnRyb2wuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbn07XG5cbkJhbm5lci5wcm90b3R5cGUuTW91c2VIb3Zlckxpc3RlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5iYW5uZXJHcm91cC5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoc2VsZi50aW1lY29uKTtcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdy5zaG93KCk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnRvZ2dsZUFycm93LmhpZGUoKTtcbiAgICAgICAgc2VsZi5ydW4oKTtcbiAgICB9KVxufTtcblxuQmFubmVyLnByb3RvdHlwZS5BcnJvd0NsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtNzk2ICogc2VsZi5saUNvdW50fSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5saUNvdW50IC0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggLT0gMVxuICAgICAgICB9XG4gICAgICAgIHNlbGYuRm9sbG93UnVuUGFnZUNvbnRyb2woKTtcbiAgICAgICAgc2VsZi5hbmltYXRlKClcbiAgICB9KTtcblxuICAgIHNlbGYucmlnaHRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLmluZGV4ID09PSBzZWxmLmxpQ291bnQgKyAxKSB7XG4gICAgICAgICAgICBzZWxmLmJhbm5lclVsLmNzcyh7J2xlZnQnOiAtNzk2fSk7XG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGYuaW5kZXggKz0gMVxuICAgICAgICB9XG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xuICAgICAgICBzZWxmLkZvbGxvd1J1blBhZ2VDb250cm9sKCk7XG4gICAgfSk7XG59O1xuXG5mdW5jdGlvbiBOZXdzTGlzdCgpIHtcbiAgICB0aGlzLm5leHRfcGFnZSA9IDI7XG5cbiAgICB0aGlzLmNhdGVnb3J5X2lkID0gMDtcbiAgICB0aGlzLmxvYWRCdG4gPSAkKCcjbG9hZC1tb3JlLWJ0bicpO1xuXG59XG5cblxuTmV3c0xpc3QucHJvdG90eXBlLkxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxvYWRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB4ZnphamF4LmdldCh7XG4gICAgICAgICAgICAndXJsJzogJy9uZXdzL21vcmUvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICdwJzogc2VsZi5uZXh0X3BhZ2UsXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5X2lkJzpzZWxmLmNhdGVnb3J5X2lkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NsaXN0ID0gcmVzdWx0WydkYXRhJ107XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdzbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoJ25ld3MtbG9hZCcsIHsnbmV3c2xpc3QnOiBuZXdzbGlzdH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVsID0gJChcIi5uZXdzLWxpc3QtdWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bC5hcHBlbmQodHBsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubmV4dF9wYWdlICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5OZXdzTGlzdC5wcm90b3R5cGUuRGlmZmVyQ2F0ZWdvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciB1bCA9ICQoJy5uZXdzLWd1aWRlLWxpc3QnKTtcbiAgICB2YXIgYXRhZyA9IHVsLmNoaWxkcmVuKCkuY2hpbGRyZW4oKTtcbiAgICBhdGFnLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGEgPSAkKHRoaXMpO1xuICAgICAgICAvL+aJvuWIsGHnmoTniLblhYPntKBsae+8jOaJvuWIsGxp55qE5a2Q5YWD57SgYeenu+mZpGNsYXNzXG4gICAgICAgIGEuYWRkQ2xhc3MoJ2FjdGl2ZScpLnBhcmVudCgpLnNpYmxpbmdzKCkuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBhLmF0dHIoJ2NhdGVnb3J5LWlkJyk7XG4gICAgICAgIHhmemFqYXguZ2V0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL25ld3MvZGlmZmVyX2NhdGUvJyxcbiAgICAgICAgICAgICdkYXRhJzoge1xuICAgICAgICAgICAgICAgICdjYXRlZ29yeV9pZCc6IHNlbGYuY2F0ZWdvcnlfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3c2xpc3QgPSByZXN1bHRbJ2RhdGEnXTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3c19saXN0X2dyb3VwID0gJCgnLm5ld3MtbGlzdC11bCcpO1xuICAgICAgICAgICAgICAgIG5ld3NfbGlzdF9ncm91cC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZSgnbmV3cy1sb2FkJywgeyduZXdzbGlzdCc6IG5ld3NsaXN0fSk7XG4gICAgICAgICAgICAgICAgbmV3c19saXN0X2dyb3VwLmFwcGVuZCh0cGwpO1xuICAgICAgICAgICAgICAgIHNlbGYubG9hZEJ0bi5zaG93KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5uZXh0X3BhZ2UgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH0pXG59O1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYmFubmVyID0gbmV3IEJhbm5lcigpO1xuICAgIGJhbm5lci5ydW4oKTtcbiAgICBiYW5uZXIuTW91c2VIb3Zlckxpc3RlbigpO1xuICAgIGJhbm5lci5BcnJvd0NsaWNrKCk7XG4gICAgYmFubmVyLkluaXRQYWdlQ29udHJvbCgpO1xuICAgIGJhbm5lci5DbGlja1BhZ2VDb250cm9sKCk7XG4gICAgYmFubmVyLkluaXRCYW5uZXJVbCgpO1xuXG4gICAgdmFyIG5ld3NsaXN0ID0gbmV3IE5ld3NMaXN0KCk7XG4gICAgbmV3c2xpc3QuTG9hZE1vcmUoKTtcbiAgICBuZXdzbGlzdC5EaWZmZXJDYXRlZ29yeSgpO1xufSk7Il19
