function TeacherAdd(){}TeacherAdd.prototype.UploadAvatar=function(){var a=$("#avatar-btn");a.change((function(){var e=a[0].files[0],t=new FormData;t.append("file",e),t.append("teacher_avatar",1),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(a){if(200===a.code){var e=a.data.url;$("#avatar-form").val(e)}else xfzajax.success(a.message)}})}))},TeacherAdd.prototype.TeacherPublication=function(){$("#pub-btn").click((function(a){a.preventDefault();var e=$("input[name='teacher-name']").val(),t=$("input[name='teacher-title']").val(),c=$("textarea[name='teacher-intro']").val(),n=$("input[name='teacher-avatar']").val(),r=$(".form-group").attr("teacherId"),o=null;o=r?"/cms/teacher_edit/":"/cms/teacher_add/",xfzajax.post({url:o,data:{name:e,title:t,intro:c,pk:r,avatar:n},success:function(a){200===a.code?r?xfzalert.SuccessBox("操作成功！","讲师信息修改成功！",(function(){window.location.reload()})):xfzalert.SuccessBox("操作成功！","讲师添加成功！",(function(){window.location.reload()})):xfzajax.success(a.message)}})}))},$((function(){var a=new TeacherAdd;a.TeacherPublication(),a.UploadAvatar()}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlYWNoZXJfYWRkLmpzIl0sIm5hbWVzIjpbIlRlYWNoZXJBZGQiLCJwcm90b3R5cGUiLCJVcGxvYWRBdmF0YXIiLCJhdmF0YXJfYnRuIiwiJCIsImNoYW5nZSIsImZpbGUiLCJmaWxlcyIsImZvcm1kYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ4ZnphamF4IiwicG9zdCIsInVybCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwic3VjY2VzcyIsInJlc3VsdCIsInZhbCIsIlRlYWNoZXJQdWJsaWNhdGlvbiIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInRlYWNoZXJfbmFtZSIsInRlYWNoZXJfdGl0bGUiLCJ0ZWFjaGVyX2ludHJvIiwidGVhY2hlcl9hdmF0YXIiLCJ0ZWFjaGVySWQiLCJhdHRyIiwibmFtZSIsInRpdGxlIiwiaW50cm8iLCJwayIsImF2YXRhciIsInhmemFsZXJ0IiwiU3VjY2Vzc0JveCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwidGVhY2hlcmFkZCJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsY0FJVEEsV0FBV0MsVUFBVUMsYUFBZSxXQUNoQyxJQUFJQyxFQUFhQyxFQUFFLGVBQ25CRCxFQUFXRSxRQUFPLFdBQ2QsSUFBSUMsRUFBT0gsRUFBVyxHQUFHSSxNQUFNLEdBQzNCQyxFQUFXLElBQUlDLFNBRW5CRCxFQUFTRSxPQUFPLE9BQVFKLEdBQ3hCRSxFQUFTRSxPQUFPLGlCQUZLLEdBR3JCQyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUwsRUFBT0ssRUFBYSxLQUFRLElBQ2RkLEVBQUUsZ0JBQ1JlLElBQUlOLFFBRWhCRixRQUFRTSxRQUFRQyxFQUFnQixnQkFPcERsQixXQUFXQyxVQUFVbUIsbUJBQXFCLFdBRXpCaEIsRUFBRSxZQUNSaUIsT0FBTSxTQUFVQyxHQUNuQkEsRUFBTUMsaUJBQ04sSUFBSUMsRUFBZXBCLEVBQUUsOEJBQThCZSxNQUMvQ00sRUFBZ0JyQixFQUFFLCtCQUErQmUsTUFDakRPLEVBQWdCdEIsRUFBRSxrQ0FBa0NlLE1BQ3BEUSxFQUFpQnZCLEVBQUUsZ0NBQWdDZSxNQUNuRFMsRUFBWXhCLEVBQUUsZUFBZXlCLEtBQUssYUFDbENoQixFQUFNLEtBRU5BLEVBREFlLEVBQ00scUJBRUEsb0JBRVZqQixRQUFRQyxLQUFLLENBQ1RDLElBQU9BLEVBQ1BDLEtBQVEsQ0FDSmdCLEtBQVFOLEVBQ1JPLE1BQVNOLEVBQ1RPLE1BQVNOLEVBQ1RPLEdBQU1MLEVBQ05NLE9BQVVQLEdBRWRWLFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxLQUNUVSxFQUNBTyxTQUFTQyxXQUFXLFFBQVMsYUFBWSxXQUNyQ0MsT0FBT0MsU0FBU0MsWUFJcEJKLFNBQVNDLFdBQVcsUUFBUyxXQUFVLFdBQ25DQyxPQUFPQyxTQUFTQyxZQUt4QjVCLFFBQVFNLFFBQVFDLEVBQWdCLGdCQU9wRGQsR0FBRSxXQUNFLElBQUlvQyxFQUFhLElBQUl4QyxXQUNyQndDLEVBQVdwQixxQkFDWG9CLEVBQVd0QyIsImZpbGUiOiJ0ZWFjaGVyX2FkZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUZWFjaGVyQWRkKCkge1xuXG59XG5cblRlYWNoZXJBZGQucHJvdG90eXBlLlVwbG9hZEF2YXRhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXZhdGFyX2J0biA9ICQoJyNhdmF0YXItYnRuJyk7XG4gICAgYXZhdGFyX2J0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZmlsZSA9IGF2YXRhcl9idG5bMF0uZmlsZXNbMF07XG4gICAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICB2YXIgdGVhY2hlcl9hdmF0YXIgPSAxO1xuICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCd0ZWFjaGVyX2F2YXRhcicsIHRlYWNoZXJfYXZhdGFyKTtcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxuICAgICAgICAgICAgJ2RhdGEnOiBmb3JtZGF0YSxcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gKHJlc3VsdFsnZGF0YSddWyd1cmwnXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmF0YXJfZm9ybSA9ICQoJyNhdmF0YXItZm9ybScpO1xuICAgICAgICAgICAgICAgICAgICBhdmF0YXJfZm9ybS52YWwodXJsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnN1Y2Nlc3MocmVzdWx0WydtZXNzYWdlJ10pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG59O1xuXG5UZWFjaGVyQWRkLnByb3RvdHlwZS5UZWFjaGVyUHVibGljYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwdWJCdG4gPSAkKCcjcHViLWJ0bicpO1xuICAgIHB1YkJ0bi5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIHRlYWNoZXJfbmFtZSA9ICQoXCJpbnB1dFtuYW1lPSd0ZWFjaGVyLW5hbWUnXVwiKS52YWwoKTtcbiAgICAgICAgdmFyIHRlYWNoZXJfdGl0bGUgPSAkKFwiaW5wdXRbbmFtZT0ndGVhY2hlci10aXRsZSddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgdGVhY2hlcl9pbnRybyA9ICQoXCJ0ZXh0YXJlYVtuYW1lPSd0ZWFjaGVyLWludHJvJ11cIikudmFsKCk7XG4gICAgICAgIHZhciB0ZWFjaGVyX2F2YXRhciA9ICQoXCJpbnB1dFtuYW1lPSd0ZWFjaGVyLWF2YXRhciddXCIpLnZhbCgpO1xuICAgICAgICB2YXIgdGVhY2hlcklkID0gJCgnLmZvcm0tZ3JvdXAnKS5hdHRyKCd0ZWFjaGVySWQnKTtcbiAgICAgICAgdmFyIHVybCA9IG51bGw7XG4gICAgICAgIGlmICh0ZWFjaGVySWQpIHtcbiAgICAgICAgICAgIHVybCA9ICcvY21zL3RlYWNoZXJfZWRpdC8nXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy90ZWFjaGVyX2FkZC8nXG4gICAgICAgIH1cbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXG4gICAgICAgICAgICAnZGF0YSc6IHtcbiAgICAgICAgICAgICAgICAnbmFtZSc6IHRlYWNoZXJfbmFtZSxcbiAgICAgICAgICAgICAgICAndGl0bGUnOiB0ZWFjaGVyX3RpdGxlLFxuICAgICAgICAgICAgICAgICdpbnRybyc6IHRlYWNoZXJfaW50cm8sXG4gICAgICAgICAgICAgICAgJ3BrJzogdGVhY2hlcklkLFxuICAgICAgICAgICAgICAgICdhdmF0YXInOiB0ZWFjaGVyX2F2YXRhclxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZWFjaGVySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhmemFsZXJ0LlN1Y2Nlc3NCb3goJ+aTjeS9nOaIkOWKn++8gScsICforrLluIjkv6Hmga/kv67mlLnmiJDlip/vvIEnLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5TdWNjZXNzQm94KCfmk43kvZzmiJDlip/vvIEnLCAn6K6y5biI5re75Yqg5oiQ5Yqf77yBJyxmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWpheC5zdWNjZXNzKHJlc3VsdFsnbWVzc2FnZSddKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9KVxufTtcblxuJChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRlYWNoZXJhZGQgPSBuZXcgVGVhY2hlckFkZCgpO1xuICAgIHRlYWNoZXJhZGQuVGVhY2hlclB1YmxpY2F0aW9uKCk7XG4gICAgdGVhY2hlcmFkZC5VcGxvYWRBdmF0YXIoKTtcbn0pOyJdfQ==
